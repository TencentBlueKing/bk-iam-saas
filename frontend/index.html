<!DOCTYPE html>
<html>
    <head>
        <!-- <link rel="icon" href="{{ STATIC_URL }}/images/favicon.ico" type="image/x-icon" />
        <link rel="shortcut icon" href="{{ STATIC_URL }}/images/favicon.ico" type="image/x-icon" /> -->
        <link rel="icon" href="{{ STATIC_URL }}/images/favicon.ico" type="image/x-icon" />
        <link rel="shortcut icon" type="image/x-icon" />
        <meta charset="utf-8">
    </head>
    <body>
        <div id="app"></div>
        <script>
            (function () {
                const LOGIN_SERVICE_URL = '{{ LOGIN_SERVICE_URL }}'
                const AJAX_URL_PREFIX = '{{ AJAX_URL_PREFIX }}'
                const SITE_URL = '{{ SITE_URL }}'
                const STATIC_URL = '{{ STATIC_URL }}'
                const BK_PAAS_HOST = '{{ BK_PAAS_HOST }}'
                const BK_USER_API = '{{ BK_COMPONENT_API_URL }}' + '/api/c/compapi/v2/usermanage/fs_list_users/'
                const CSRF_COOKIE_NAME = '{{ CSRF_COOKIE_NAME }}'
                const BK_DOCS_URL_PREFIX = '{{ BK_DOCS_URL_PREFIX }}' + '/markdown'
                const BK_CE_URL = '{{ BK_CE_URL }}' || 'https://bk.tencent.com/s-mart/community'
                const BK_ITSM_APP_URL = '{{ BK_ITSM_APP_URL }}'
                const ENABLE_MODEL_BUILD = '{{ ENABLE_MODEL_BUILD }}' || ''
                const ENABLE_PERMISSION_HANDOVER = '{{ ENABLE_PERMISSION_HANDOVER }}' || ''
                const ENABLE_TEMPORARY_POLICY = '{{ ENABLE_TEMPORARY_POLICY }}' || ''
                const ENABLE_GROUP_INSTANCE_SEARCH = '{{ ENABLE_GROUP_INSTANCE_SEARCH }}' || ''
                const ENABLE_ORGANIZATION_COUNT = '{{ ENABLE_ORGANIZATION_COUNT }}' || ''
                const ENABLE_ASSISTANT = '{{ ENABLE_ASSISTANT }}' || ''
                const ENABLE_BK_NOTICE = '{{ ENABLE_BK_NOTICE }}' || ''
                const BK_DOMAIN = '{{ BK_DOMAIN }}' || ''
                const BK_COMPONENT_API_URL = '{{ BK_COMPONENT_API_URL }}' || ''
                const BK_SHARED_RES_URL = '{{ BK_SHARED_RES_URL }}' || ''
                const BK_APP_CODE = '{{ BK_APP_CODE }}' || ''
                const DEPARTMENT_IDS_NOT_ALLOWED_AS_GROUP_MEMBER = '{{ DEPARTMENT_IDS_NOT_ALLOWED_AS_GROUP_MEMBER }}' || ''
                const GROUP_AUTH_TEMPLATE_ONCE_LIMIT = '{{ GROUP_AUTH_TEMPLATE_ONCE_LIMIT }}' || ''
                document.domain = '{{ SESSION_COOKIE_DOMAIN }}'
                window.LOGIN_SERVICE_URL = LOGIN_SERVICE_URL
                window.AJAX_URL_PREFIX = AJAX_URL_PREFIX
                window.SITE_URL = SITE_URL
                window.STATIC_URL = STATIC_URL
                window.BK_PAAS_HOST = BK_PAAS_HOST
                window.BK_USER_API = BK_USER_API
                window.CUR_LANGUAGE = getLanguage()
                window.CSRF_COOKIE_NAME = CSRF_COOKIE_NAME
                window.BK_DOCS_URL_PREFIX = BK_DOCS_URL_PREFIX
                window.BK_ITSM_APP_URL = BK_ITSM_APP_URL
                window.ENABLE_MODEL_BUILD = ENABLE_MODEL_BUILD
                window.ENABLE_PERMISSION_HANDOVER = ENABLE_PERMISSION_HANDOVER
                window.ENABLE_TEMPORARY_POLICY = ENABLE_TEMPORARY_POLICY
                window.ENABLE_GROUP_INSTANCE_SEARCH = ENABLE_GROUP_INSTANCE_SEARCH
                window.ENABLE_ORGANIZATION_COUNT = ENABLE_ORGANIZATION_COUNT
                window.ENABLE_ASSISTANT = ENABLE_ASSISTANT
                window.ENABLE_BK_NOTICE = ENABLE_BK_NOTICE
                window.BK_CE_URL = BK_CE_URL
                window.BK_DOMAIN = BK_DOMAIN
                window.BK_COMPONENT_API_URL = BK_COMPONENT_API_URL
                window.BK_SHARED_RES_URL = BK_SHARED_RES_URL
                window.BK_APP_CODE = BK_APP_CODE
                window.DEPARTMENT_IDS_NOT_ALLOWED_AS_GROUP_MEMBER = DEPARTMENT_IDS_NOT_ALLOWED_AS_GROUP_MEMBER
                window.GROUP_AUTH_TEMPLATE_ONCE_LIMIT = GROUP_AUTH_TEMPLATE_ONCE_LIMIT
            })()

            function getLanguage () {
              let CUR_LANGUAGE = getCookie("blueking_language") || "zh-cn";
              const isEN = CUR_LANGUAGE.toLowerCase().indexOf("en") > -1;
              const isCN = CUR_LANGUAGE.toLowerCase().indexOf("zh") > -1;
              const isJP = CUR_LANGUAGE.toLowerCase().indexOf("ja") > -1 || CUR_LANGUAGE.toLowerCase().indexOf("jp") > -1;
              // 英文 兼容处理
              if (isEN) {
                CUR_LANGUAGE = "en";
                document.title = "lAM | Tencent BlueKing";
              }
              // 中文 兼容处理
              if (isCN) {
                CUR_LANGUAGE = "zh-cn";
                document.title = "权限中心 | 蓝鲸智云";
              }
              //  日文 兼容处理
              if (isJP) {
                CUR_LANGUAGE = 'ja';
                document.title = "権限センター | ブルーケイルズクラウド";
              }
              return CUR_LANGUAGE;
            }

            function getCookie (name) {
            const data = document.cookie.split(';');
            const params = {};
            for (let i = 0; i < data.length; i++) {
                params[data[i].split('=')[0].replace(/\s/, '')] = data[i].split('=')[1];
            }
            return params[name];
          }
        </script>
    </body>
</html>
